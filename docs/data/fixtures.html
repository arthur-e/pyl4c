<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pyl4c.data.fixtures API documentation</title>
<meta name="description" content="Commonly used global constants. **New users should change
`ANCILLARY_DATA_PATHS` if it doesn&#39;t match their file system.** …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<style>.homelink{display:block;font-size:2em;font-weight:bold;color:#555;padding-bottom:.5em;border-bottom:1px solid silver}.homelink:hover{color:inherit}.homelink img{max-width:35%;max-height:5em;margin:auto;margin-bottom:.3em}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pyl4c.data.fixtures</code></h1>
</header>
<section id="section-intro">
<p>Commonly used global constants. <strong>New users should change
<code>ANCILLARY_DATA_PATHS</code> if it doesn't match their file system.</strong></p>
<p>Source for EASE-Grid 2.0 parameters:</p>
<pre><code>&lt;https://nsidc.org/ease/ease-grid-projection-gt&gt;
</code></pre>
<p>NOTE: EASE-Grid 2.0 parameters do not match exactly those specified at NSIDC
because, in fact, they must be 1000 or 9000, depending on the grid size, in
order to get the right number of rows and columns in the output image.
Grid resolution is only a whole number for the polar (north or south
hemisphere) grids.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#39;&#39;&#39;
Commonly used global constants. **New users should change
`ANCILLARY_DATA_PATHS` if it doesn&#39;t match their file system.**

Source for EASE-Grid 2.0 parameters:

    https://nsidc.org/ease/ease-grid-projection-gt

NOTE: EASE-Grid 2.0 parameters do not match exactly those specified at NSIDC
because, in fact, they must be 1000 or 9000, depending on the grid size, in
order to get the right number of rows and columns in the output image.
Grid resolution is only a whole number for the polar (north or south
hemisphere) grids.
&#39;&#39;&#39;

import csv
import numpy as np
from collections import OrderedDict

ANCILLARY_DATA_PATHS = {
    &#39;smap_l4c_ancillary_data_file_path&#39;: &#39;SPL4C_Vv4040_SMAP_L4_C.Ancillary.h5&#39;,
    &#39;smap_l4c_1km_ancillary_data_lc_path&#39;: &#39;MCD12Q1_M01_lc_dom_uint8&#39;,
    &#39;smap_l4c_9km_ancillary_data_lc_path&#39;: &#39;MOD12Q1_M09_lc_dom_uint8&#39;,
    &#39;smap_l4c_1km_ancillary_data_x_coord_path&#39;: &#39;SMAP_L4_C_LON_14616_x_34704_M01_flt32&#39;,
    &#39;smap_l4c_1km_ancillary_data_y_coord_path&#39;: &#39;SMAP_L4_C_LAT_14616_x_34704_M01_flt32&#39;,
    &#39;smap_l4c_9km_ancillary_data_x_coord_path&#39;: &#39;SMAP_L4_C_LON_1624_x_3856_M09_flt32&#39;,
    &#39;smap_l4c_9km_ancillary_data_y_coord_path&#39;: &#39;SMAP_L4_C_LAT_1624_x_3856_M09_flt32&#39;,
    &#39;smap_l4c_9km_pft_subgrid_counts_CONUS&#39;: &#39;SMAP_L4C_Vv4040_1km_subgrid_PFT_counts_CONUS.h5&#39;,
    &#39;smap_l4c_9km_sparse_col_index&#39;: &#39;MCD12Q1_M09land_col.uint16&#39;,
    &#39;smap_l4c_9km_sparse_row_index&#39;: &#39;MCD12Q1_M09land_row.uint16&#39;,
    &#39;transcom_netcdf_path&#39;: &#39;CarbonTracker_TransCom_and_other_regions.nc&#39;
}


# Version 4020 BPLUT parameters in order of PFT numeric code (PFT 0 through 9)
BPLUT = OrderedDict({
    # Only reason for OrderedDict (instead of dict) is for consistency with
    #   pyl4c.data.fixtures.BPLUT()
    &#39;_version&#39;: &#39;4&#39;,
    &#39;LUE&#39;: np.array([[ # gC per MJ
        np.nan, 1.71, 1.38, 1.71, 1.19, 1.95, 1.68, 2.53, 3.6, np.nan
    ]]),
    &#39;CUE&#39;: np.array([[
        np.nan, 0.7, 0.57, 0.79, 0.78, 0.65, 0.6, 0.72, 0.71, np.nan
    ]]),
    &#39;tmin&#39;: np.array([ # degrees K
        [np.nan, 235, 230, 259, 260, 259, 251, 246, 266, np.nan],
        [np.nan, 309, 303, 301, 284, 304, 302, 314, 319, np.nan]
    ]),
    &#39;vpd&#39;: np.array([ # Pascals
        [np.nan, 0, 15, 869, 1500, 4, 0, 228, 1500, np.nan],
        [np.nan, 4169, 7000, 3452, 5401, 4282, 4229, 4516, 7000, np.nan]
    ]),
    &#39;smrz&#39;: np.array([ # Percent saturation
        [np.nan, -30, 18, -30, -26, 22, -30, -15, 10, np.nan],
        [np.nan, 74, 26, 49, 87, 72, 76, 30, 68, np.nan]
    ]),
    &#39;smsf&#39;: np.array([ # Percent saturation
        [np.nan, -50, -46, -9, -50, -15, -3, -42, -49, np.nan],
        [np.nan, 46, 59, 43, 53, 48, 51, 41, 30, np.nan]
    ]),
    &#39;ft&#39;: np.array([ # Frozen = 0, Thawed = 1
        [np.nan, 0.58, 0.36, 0.55, 0.9, 0.91, 0.85, 0.77, 1, np.nan],
        [np.nan, 1, 1, 1, 1, 1, 1, 1, 1, np.nan]
    ]),
    &#39;tsoil&#39;: np.array([[ # degrees K
        np.nan, 265.04, 477.83, 238.81, 267.26, 292.82, 232.24, 263.97, 329.63, np.nan
    ]]),
    # NOTE: The medium/structural and slow/recalcitrant decay constants
    #   (2nd and 3rd rows) are true decay constants, unlike in Ops
    #   BPLUT which presents only dimensionless scalars.
    &#39;decay_rates&#39;: np.array([ # days^-1
        [np.nan, 0.027, 0.028, 0.028, 0.03, 0.015, 0.025, 0.019, 0.035, np.nan],
        [np.nan, 1.08e-2, 1.12e-2, 1.12e-2, 1.2e-2, 0.6e-2, 1e-2, 0.76e-2, 1.4e-2, np.nan],
        [np.nan, 2.51e-4, 2.6e-4, 2.6e-4, 2.79e-4, 1.4e-4, 2.33e-4, 1.77e-4, 3.26e-4, np.nan]
    ]),
    &#39;f_metabolic&#39;: np.array([[ # Fraction of daily litterfall entering &#34;fast&#34; or metabolic pool
        np.nan, 0.49, 0.71, 0.67, 0.67, 0.62, 0.76, 0.78, 0.78, np.nan
    ]]), # Also known as &#34;f_met&#34;
    &#39;f_structural&#39;: np.array([[ # Fraction of structural (str) pool transferred in &#34;humification&#34;
        np.nan, 0.3, 0.3, 0.7, 0.3, 0.35, 0.55, 0.5, 0.8, np.nan
    ]]) # Also known as &#34;f_str&#34; -- See Jones et al. (2017, IEEE TGARS, p.5)
})


EASE2_GRID_PARAMS = {
    # A GeoTransform for a north-up raster is:
    #   (x_min, pixel_width, 0, y_max, 0, -pixel_height)
    &#39;M01&#39;: {
        &#39;epsg&#39;: 6933,
        &#39;geotransform&#39;: (-17367530.45, 1000, 0, 7314540.83, 0, -1000),
        &#39;resolution&#39;: 1000.89502334956, # From Brodzik et al.
        &#39;shape&#39;: (14616, 34704),
        &#39;size&#39;: 14616*34704
    },
    &#39;M09&#39;: {
        &#39;epsg&#39;: 6933,
        &#39;geotransform&#39;: (-17367530.45, 9000, 0, 7314540.83, 0, -9000),
        &#39;resolution&#39;: 9008.055210146, # From Brodzik et al.
        &#39;shape&#39;: (1624, 3856),
        &#39;size&#39;: 1624*3856
    },
    &#39;N09&#39;: {
        &#39;epsg&#39;: 6931,
        &#39;geotransform&#39;: (-9000000.0, 9000, 0, 9000000.0, 0, -9000),
        &#39;resolution&#39;: 9000,
        &#39;shape&#39;: (2000, 2000),
        &#39;size&#39;: 2000*2000
    },
    &#39;M25&#39;: {
        &#39;epsg&#39;: 6933,
        &#39;geotransform&#39;: (-17367530.45, 25000, 0, 7307375.92, 0, -25000),
        &#39;resolution&#39;: 25000,
        &#39;shape&#39;: (584, 1388),
        &#39;size&#39;: 584*1388
    },
    &#39;M36&#39;: {
        &#39;epsg&#39;: 6933,
        &#39;geotransform&#39;: (-17367530.45, 36000, 0, 7314540.83, 0, -36000),
        &#39;resolution&#39;: 36032.22,
        &#39;shape&#39;: (406, 964),
        &#39;size&#39;: 406*964
    }
}


HDF_PATHS = { # Where in the HDF hierarchy certain variables live
    &#39;SPL4CMDL&#39;: { # By Earthdata Dataset ID
        &#39;4&#39;: { # By Version number
            &#39;longitude&#39;: &#39;GEO/longitude&#39;,
            &#39;latitude&#39;: &#39;GEO/latitude&#39;,
            &#39;SOC&#39;: &#39;SOC/soc_mean&#39;,
            &#39;SOC*&#39;: &#39;SOC/soc_pft%d_mean&#39;,
            &#39;GPP&#39;: &#39;GPP/gpp_mean&#39;,
            &#39;GPP*&#39;: &#39;GPP/gpp_pft%d_mean&#39;,
            &#39;NEE&#39;: &#39;NEE/nee_mean&#39;,
            &#39;NEE*&#39;: &#39;NEE/nee_pft%d_mean&#39;,
            &#39;RH&#39;: &#39;RH/rh_mean&#39;,
            &#39;RH*&#39;: &#39;RH/rh_pft%d_mean&#39;,
        }
    },
    &#39;SPL4SMGP&#39;: {
        &#39;4&#39;: {&#39;longitude&#39;: &#39;cell_lon&#39;, &#39;latitude&#39;: &#39;cell_lat&#39;,}
    }
}


PFT = OrderedDict({
    0: (&#39;Water&#39;, &#39;WET&#39;),
    1: (&#39;Evergreen Needleleaf&#39;, &#39;ENF&#39;),
    2: (&#39;Evergreen Broadleaf&#39;, &#39;EBF&#39;),
    3: (&#39;Deciduous Needleleaf&#39;, &#39;DNF&#39;),
    4: (&#39;Deciduous Broadleaf&#39;, &#39;DBF&#39;),
    5: (&#39;Shrub&#39;, &#39;SHB&#39;),
    6: (&#39;Grass&#39;, &#39;GRS&#39;),
    7: (&#39;Cereal Crop&#39;, &#39;CCR&#39;),
    8: (&#39;Broadleaf Crop&#39;, &#39;BCR&#39;),
    9: (&#39;Urban and Built-Up&#39;, &#39;URB&#39;)
})


# BBOX extents, in decimal degrees, based on gdal_rasterize -te option:
#   https://gdal.org/programs/gdal_rasterize.html#cmdoption-gdal-translate-te
SUBSETS_BBOX = { # &lt;xmin&gt;, &lt;ymin&gt;, &lt;xmax&gt;, &lt;ymax&gt;
    &#39;CONUS&#39;: [-124.5, 24.4, -66.7, 50.0],
    &#39;WesternHemisphere&#39;: [-180, -90, 0, 90],
    &#39;WesternHemisphere2&#39;: [-180, -90, -25, 90],
    &#39;NorthernHemisphere&#39;: [-180, 0, 180, 90],
    &#39;NorthernHemisphere45&#39;: [-180, 45, 180, 90],
    &#39;NorthernHemisphere40&#39;: [-180, 40, 180, 90],
    &#39;Nigeria&#39;: [2.3, 4, 14.8, 14],
    # AOI for: Chiodi and Harrison (2013) Journal of Climate 26 (3):822–837
    &#39;ChiodiHarrison2013&#39;: [-160, -5, -110, 5],
    &#39;Kang2014EMS&#39;: [-125, 47, -113, 49],
    &#39;NorthernPlains&#39;: [-116.1, 40.9, -96.4, 49],
    &#39;Montana&#39;: [-116.1, 44.4, -104.01, 49],
    &#39;Iowa&#39;: [-96.7, 40.58, -90.1, 43.5],
    &#39;Bangladesh1kmSubset&#39;: [78.9, 23.2, 96.1, 29.3]
}


def parameter_mapped(name, pft_array, bplut = BPLUT):
    &#39;&#39;&#39;
    Given a BPLUT parameter and a PFT array, returns an array with the
    corresponding parameter values for each PFT code.

    Parameters
    ----------
    name : str
        The name of the BPLUT parameter
    pft_array : numpy.ndarray
        Array of any size or shape with numeric elements corresponding to
        PFT codes
    bplut : dict
        (Optional) A collection of BPLUT parameters

    Returns
    -------
    numpy.ndarray
        Array of same size, shape as pft_array but with parameter values
        in place of PFT codes
    &#39;&#39;&#39;
    param = bplut[name]
    # Basically, index the &lt;name&gt; array, in PFT order, by PFT numeric codes
    return np.asarray(param)[np.ravel(pft_array)].reshape(pft_array.shape)


def restore_bplut(csv_file_path, version_id = None):
    &#39;&#39;&#39;
    Translates a BPLUT CSV file to a Python internal representation
    (OrderedDict instance).

    Parameters
    ----------
    csv_file_path : str
        File path to the CSV representation of the BPLUT
    version_id : str
        (Optional) Version identifier for the BPLUT

    Returns
    -------
    OrderedDict
    &#39;&#39;&#39;
    header = (&#39;LC_index&#39;, &#39;LC_Label&#39;, &#39;model_code&#39;, &#39;NDVItoFPAR_scale&#39;,
        &#39;NDVItoFPAR_offset&#39;, &#39;LUEmax&#39;, &#39;Tmin_min_K&#39;, &#39;Tmin_max_K&#39;,
        &#39;VPD_min_Pa&#39;, &#39;VPD_max_Pa&#39;, &#39;SMrz_min&#39;, &#39;SMrz_max&#39;, &#39;FT_min&#39;,
        &#39;FT_max&#39;, &#39;SMtop_min&#39;, &#39;SMtop_max&#39;, &#39;Tsoil_beta0&#39;, &#39;Tsoil_beta1&#39;,
        &#39;Tsoil_beta2&#39;, &#39;fraut&#39;, &#39;fmet&#39;, &#39;fstr&#39;, &#39;kopt&#39;, &#39;kstr&#39;, &#39;kslw&#39;,
        &#39;Nee_QA_Rank_min&#39;, &#39;Nee_QA_Rank_max&#39;, &#39;Nee_QA_Error_min&#39;,
        &#39;Nee_QA_Error_max&#39;, &#39;Fpar_QA_Rank_min&#39;, &#39;Fpar_QA_Rank_max&#39;,
        &#39;Fpar_QA_Error_min&#39;, &#39;Fpar_QA_Error_max&#39;, &#39;FtMethod_QA_mult&#39;,
        &#39;FtAge_QA_Rank_min&#39;, &#39;FtAge_QA_Rank_max&#39;, &#39;FtAge_QA_Error_min&#39;,
        &#39;FtAge_QA_Error_max&#39;, &#39;Par_QA_Error&#39;, &#39;Tmin_QA_Error&#39;,
        &#39;Vpd_QA_Error&#39;, &#39;Smrz_QA_Error&#39;, &#39;Tsoil_QA_Error&#39;, &#39;Smtop_QA_Error&#39;)
    contents = []
    with open(csv_file_path, &#39;r&#39;) as stream:
        reader = csv.DictReader(
            filter(lambda row: row[0] != &#39;#&#39;, stream), fieldnames = header)
        for row in reader:
            contents.append(row)

    result = BPLUT.copy()
    result[&#39;_version&#39;] = &#39;UNKNOWN&#39; if version_id is None else version_id
    result[&#39;LUE&#39;] = np.array([[
        contents[p-1][&#39;LUEmax&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;CUE&#39;] = np.array([[
        (1 - float(contents[p-1][&#39;fraut&#39;])) if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;tmin&#39;] = np.array([
        [contents[p-1][&#39;Tmin_min_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;Tmin_max_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;vpd&#39;] = np.array([
        [contents[p-1][&#39;VPD_min_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;VPD_max_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(2)
    result[&#39;smrz&#39;] = np.array([
        [contents[p-1][&#39;SMrz_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMrz_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;smsf&#39;] = np.array([
        [contents[p-1][&#39;SMtop_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMtop_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;ft&#39;] = np.array([
        [contents[p-1][&#39;FT_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;FT_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    result[&#39;tsoil&#39;] = np.array([[
        contents[p-1][&#39;Tsoil_beta0&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;f_metabolic&#39;] = np.array([[
        contents[p-1][&#39;fmet&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(3)
    result[&#39;f_structural&#39;] = np.array([[
        contents[p-1][&#39;fstr&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;decay_rates&#39;] = np.array([
        [contents[p-1][&#39;kopt&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kstr&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kslw&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    # The &#34;kstr&#34; and &#34;kslw&#34; values are really the fraction of kopt
    #   assigned to the second and third pools
    result[&#39;decay_rates&#39;][1,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][1,:])
    result[&#39;decay_rates&#39;][2,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][2,:])
    return result</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="pyl4c.data.fixtures.parameter_mapped"><code class="name flex">
<span>def <span class="ident">parameter_mapped</span></span>(<span>name, pft_array, bplut=OrderedDict([('_version', '4'), ('LUE', array([[ nan, 1.71, 1.38, 1.71, 1.19, 1.95, 1.68, 2.53, 3.6 ,
nan]])), ('CUE', array([[ nan, 0.7 , 0.57, 0.79, 0.78, 0.65, 0.6 , 0.72, 0.71,
nan]])), ('tmin', array([[ nan, 235., 230., 259., 260., 259., 251., 246., 266.,
nan],
[ nan, 309., 303., 301., 284., 304., 302., 314., 319.,
nan]])), ('vpd', array([[
nan, 0.000e+00, 1.500e+01, 8.690e+02, 1.500e+03, 4.000e+00,
0.000e+00, 2.280e+02, 1.500e+03,
nan],
[
nan, 4.169e+03, 7.000e+03, 3.452e+03, 5.401e+03, 4.282e+03,
4.229e+03, 4.516e+03, 7.000e+03,
nan]])), ('smrz', array([[ nan, -30.,
18., -30., -26.,
22., -30., -15.,
10.,
nan],
[ nan,
74.,
26.,
49.,
87.,
72.,
76.,
30.,
68.,
nan]])), ('smsf', array([[ nan, -50., -46.,
-9., -50., -15.,
-3., -42., -49.,
nan],
[ nan,
46.,
59.,
43.,
53.,
48.,
51.,
41.,
30.,
nan]])), ('ft', array([[ nan, 0.58, 0.36, 0.55, 0.9 , 0.91, 0.85, 0.77, 1.
,
nan],
[ nan, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
,
nan]])), ('tsoil', array([[
nan, 265.04, 477.83, 238.81, 267.26, 292.82, 232.24, 263.97,
329.63,
nan]])), ('decay_rates', array([[
nan, 0.027
, 0.028
, 0.028
, 0.03
, 0.015
,
0.025
, 0.019
, 0.035
,
nan],
[
nan, 0.0108
, 0.0112
, 0.0112
, 0.012
, 0.006
,
0.01
, 0.0076
, 0.014
,
nan],
[
nan, 0.000251, 0.00026 , 0.00026 , 0.000279, 0.00014 ,
0.000233, 0.000177, 0.000326,
nan]])), ('f_metabolic', array([[ nan, 0.49, 0.71, 0.67, 0.67, 0.62, 0.76, 0.78, 0.78,
nan]])), ('f_structural', array([[ nan, 0.3 , 0.3 , 0.7 , 0.3 , 0.35, 0.55, 0.5 , 0.8 ,
nan]]))]))</span>
</code></dt>
<dd>
<div class="desc"><p>Given a BPLUT parameter and a PFT array, returns an array with the
corresponding parameter values for each PFT code.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the BPLUT parameter</dd>
<dt><strong><code>pft_array</code></strong> :&ensp;<code>numpy.ndarray</code></dt>
<dd>Array of any size or shape with numeric elements corresponding to
PFT codes</dd>
<dt><strong><code>bplut</code></strong> :&ensp;<code>dict</code></dt>
<dd>(Optional) A collection of BPLUT parameters</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>numpy.ndarray</code></dt>
<dd>Array of same size, shape as pft_array but with parameter values
in place of PFT codes</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parameter_mapped(name, pft_array, bplut = BPLUT):
    &#39;&#39;&#39;
    Given a BPLUT parameter and a PFT array, returns an array with the
    corresponding parameter values for each PFT code.

    Parameters
    ----------
    name : str
        The name of the BPLUT parameter
    pft_array : numpy.ndarray
        Array of any size or shape with numeric elements corresponding to
        PFT codes
    bplut : dict
        (Optional) A collection of BPLUT parameters

    Returns
    -------
    numpy.ndarray
        Array of same size, shape as pft_array but with parameter values
        in place of PFT codes
    &#39;&#39;&#39;
    param = bplut[name]
    # Basically, index the &lt;name&gt; array, in PFT order, by PFT numeric codes
    return np.asarray(param)[np.ravel(pft_array)].reshape(pft_array.shape)</code></pre>
</details>
</dd>
<dt id="pyl4c.data.fixtures.restore_bplut"><code class="name flex">
<span>def <span class="ident">restore_bplut</span></span>(<span>csv_file_path, version_id=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Translates a BPLUT CSV file to a Python internal representation
(OrderedDict instance).</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>csv_file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>File path to the CSV representation of the BPLUT</dd>
<dt><strong><code>version_id</code></strong> :&ensp;<code>str</code></dt>
<dd>(Optional) Version identifier for the BPLUT</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>OrderedDict</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def restore_bplut(csv_file_path, version_id = None):
    &#39;&#39;&#39;
    Translates a BPLUT CSV file to a Python internal representation
    (OrderedDict instance).

    Parameters
    ----------
    csv_file_path : str
        File path to the CSV representation of the BPLUT
    version_id : str
        (Optional) Version identifier for the BPLUT

    Returns
    -------
    OrderedDict
    &#39;&#39;&#39;
    header = (&#39;LC_index&#39;, &#39;LC_Label&#39;, &#39;model_code&#39;, &#39;NDVItoFPAR_scale&#39;,
        &#39;NDVItoFPAR_offset&#39;, &#39;LUEmax&#39;, &#39;Tmin_min_K&#39;, &#39;Tmin_max_K&#39;,
        &#39;VPD_min_Pa&#39;, &#39;VPD_max_Pa&#39;, &#39;SMrz_min&#39;, &#39;SMrz_max&#39;, &#39;FT_min&#39;,
        &#39;FT_max&#39;, &#39;SMtop_min&#39;, &#39;SMtop_max&#39;, &#39;Tsoil_beta0&#39;, &#39;Tsoil_beta1&#39;,
        &#39;Tsoil_beta2&#39;, &#39;fraut&#39;, &#39;fmet&#39;, &#39;fstr&#39;, &#39;kopt&#39;, &#39;kstr&#39;, &#39;kslw&#39;,
        &#39;Nee_QA_Rank_min&#39;, &#39;Nee_QA_Rank_max&#39;, &#39;Nee_QA_Error_min&#39;,
        &#39;Nee_QA_Error_max&#39;, &#39;Fpar_QA_Rank_min&#39;, &#39;Fpar_QA_Rank_max&#39;,
        &#39;Fpar_QA_Error_min&#39;, &#39;Fpar_QA_Error_max&#39;, &#39;FtMethod_QA_mult&#39;,
        &#39;FtAge_QA_Rank_min&#39;, &#39;FtAge_QA_Rank_max&#39;, &#39;FtAge_QA_Error_min&#39;,
        &#39;FtAge_QA_Error_max&#39;, &#39;Par_QA_Error&#39;, &#39;Tmin_QA_Error&#39;,
        &#39;Vpd_QA_Error&#39;, &#39;Smrz_QA_Error&#39;, &#39;Tsoil_QA_Error&#39;, &#39;Smtop_QA_Error&#39;)
    contents = []
    with open(csv_file_path, &#39;r&#39;) as stream:
        reader = csv.DictReader(
            filter(lambda row: row[0] != &#39;#&#39;, stream), fieldnames = header)
        for row in reader:
            contents.append(row)

    result = BPLUT.copy()
    result[&#39;_version&#39;] = &#39;UNKNOWN&#39; if version_id is None else version_id
    result[&#39;LUE&#39;] = np.array([[
        contents[p-1][&#39;LUEmax&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;CUE&#39;] = np.array([[
        (1 - float(contents[p-1][&#39;fraut&#39;])) if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;tmin&#39;] = np.array([
        [contents[p-1][&#39;Tmin_min_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;Tmin_max_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;vpd&#39;] = np.array([
        [contents[p-1][&#39;VPD_min_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;VPD_max_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(2)
    result[&#39;smrz&#39;] = np.array([
        [contents[p-1][&#39;SMrz_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMrz_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;smsf&#39;] = np.array([
        [contents[p-1][&#39;SMtop_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMtop_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;ft&#39;] = np.array([
        [contents[p-1][&#39;FT_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;FT_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    result[&#39;tsoil&#39;] = np.array([[
        contents[p-1][&#39;Tsoil_beta0&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;f_metabolic&#39;] = np.array([[
        contents[p-1][&#39;fmet&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(3)
    result[&#39;f_structural&#39;] = np.array([[
        contents[p-1][&#39;fstr&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;decay_rates&#39;] = np.array([
        [contents[p-1][&#39;kopt&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kstr&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kslw&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    # The &#34;kstr&#34; and &#34;kslw&#34; values are really the fraction of kopt
    #   assigned to the second and third pools
    result[&#39;decay_rates&#39;][1,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][1,:])
    result[&#39;decay_rates&#39;][2,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][2,:])
    return result</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="SMAP Mission Homepage" href="https://smap.jpl.nasa.gov/">
<img src="https://arthur-e.github.io/pyl4c/templates/images/logo_SMAP.jpg" alt="">
</a>
</header>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyl4c.data" href="index.html">pyl4c.data</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="pyl4c.data.fixtures.parameter_mapped" href="#pyl4c.data.fixtures.parameter_mapped">parameter_mapped</a></code></li>
<li><code><a title="pyl4c.data.fixtures.restore_bplut" href="#pyl4c.data.fixtures.restore_bplut">restore_bplut</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>