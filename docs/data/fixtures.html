<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.5">
<title>pyl4c.data.fixtures API documentation</title>
<meta name="description" content="Commonly used global constants. **New users should change
`ANCILLARY_DATA_PATHS` if it doesn&#39;t match their file system.** â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
<style>.homelink{display:block;font-size:2em;font-weight:bold;color:#555;padding-bottom:.5em;border-bottom:1px solid silver}.homelink:hover{color:inherit}.homelink img{max-width:35%;max-height:5em;margin:auto;margin-bottom:.3em}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pyl4c.data.fixtures</code></h1>
</header>
<section id="section-intro">
<p>Commonly used global constants. <strong>New users should change
<code>ANCILLARY_DATA_PATHS</code> if it doesn't match their file system.</strong></p>
<p>Source for EASE-Grid 2.0 parameters:</p>
<pre><code>&lt;https://nsidc.org/ease/ease-grid-projection-gt&gt;
</code></pre>
<p>NOTE: EASE-Grid 2.0 parameters do not match exactly those specified at NSIDC
because, in fact, they must be 1000 or 9000, depending on the grid size, in
order to get the right number of rows and columns in the output image.
Grid resolution is only a whole number for the polar (north or south
hemisphere) grids.</p>
<p><code>ANCILLARY_DATA_PATHS</code> is loaded from a file,
<code>pyl4c/data/files/ancillary_file_paths.yaml</code>, which describes the location on
the local file system of certain ancillary files (and naming conventions
within those files):</p>
<pre><code>smap_l4c_ancillary_data_file_path: "SPL4C_Vv4040_SMAP_L4_C.Ancillary.h5"
smap_l4c_1km_ancillary_data_lc_path: "MCD12Q1_M01_lc_dom_uint8"
smap_l4c_9km_ancillary_data_lc_path: "MOD12Q1_M09_lc_dom_uint8"
smap_l4c_1km_ancillary_data_x_coord_path: "SMAP_L4_C_LON_14616_x_34704_M01_flt32"
smap_l4c_1km_ancillary_data_y_coord_path: "SMAP_L4_C_LAT_14616_x_34704_M01_flt32"
smap_l4c_9km_ancillary_data_x_coord_path: "SMAP_L4_C_LON_1624_x_3856_M09_flt32"
smap_l4c_9km_ancillary_data_y_coord_path: "SMAP_L4_C_LAT_1624_x_3856_M09_flt32"
smap_l4c_9km_pft_subgrid_counts_CONUS: "SMAP_L4C_Vv4040_1km_subgrid_PFT_counts_CONUS.h5"
smap_l4c_9km_sparse_col_index: "MCD12Q1_M09land_col.uint16"
smap_l4c_9km_sparse_row_index: "MCD12Q1_M09land_row.uint16"
transcom_netcdf_path: "CarbonTracker_TransCom_and_other_regions.nc"
</code></pre>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="pyl4c.data.fixtures.parameter_mapped"><code class="name flex">
<span>def <span class="ident">parameter_mapped</span></span>(<span>name,<br>pft_array,<br>bplut=OrderedDict([('_version', '4'), ('LUE', array([[ nan, 1.71, 1.38, 1.71, 1.19, 1.95, 1.68, 2.53, 3.6 ,
nan]])), ('CUE', array([[ nan, 0.7 , 0.57, 0.79, 0.78, 0.65, 0.6 , 0.72, 0.71,
nan]])), ('tmin', array([[ nan, 235., 230., 259., 260., 259., 251., 246., 266.,
nan],
[ nan, 309., 303., 301., 284., 304., 302., 314., 319.,
nan]])), ('vpd', array([[
nan, 0.000e+00, 1.500e+01, 8.690e+02, 1.500e+03, 4.000e+00,
0.000e+00, 2.280e+02, 1.500e+03,
nan],
[
nan, 4.169e+03, 7.000e+03, 3.452e+03, 5.401e+03, 4.282e+03,
4.229e+03, 4.516e+03, 7.000e+03,
nan]])), ('smrz', array([[ nan, -30.,
18., -30., -26.,
22., -30., -15.,
10.,
nan],
[ nan,
74.,
26.,
49.,
87.,
72.,
76.,
30.,
68.,
nan]])), ('smsf', array([[ nan, -50., -46.,
-9., -50., -15.,
-3., -42., -49.,
nan],
[ nan,
46.,
59.,
43.,
53.,
48.,
51.,
41.,
30.,
nan]])), ('ft', array([[ nan, 0.58, 0.36, 0.55, 0.9 , 0.91, 0.85, 0.77, 1.
,
nan],
[ nan, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
, 1.
,
nan]])), ('tsoil', array([[
nan, 265.04, 477.83, 238.81, 267.26, 292.82, 232.24, 263.97,
329.63,
nan]])), ('decay_rates', array([[
nan, 0.027
, 0.028
, 0.028
, 0.03
, 0.015
,
0.025
, 0.019
, 0.035
,
nan],
[
nan, 0.0108
, 0.0112
, 0.0112
, 0.012
, 0.006
,
0.01
, 0.0076
, 0.014
,
nan],
[
nan, 0.000251, 0.00026 , 0.00026 , 0.000279, 0.00014 ,
0.000233, 0.000177, 0.000326,
nan]])), ('f_metabolic', array([[ nan, 0.49, 0.71, 0.67, 0.67, 0.62, 0.76, 0.78, 0.78,
nan]])), ('f_structural', array([[ nan, 0.3 , 0.3 , 0.7 , 0.3 , 0.35, 0.55, 0.5 , 0.8 ,
nan]]))]))</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parameter_mapped(name, pft_array, bplut = BPLUT):
    &#39;&#39;&#39;
    Given a BPLUT parameter and a PFT array, returns an array with the
    corresponding parameter values for each PFT code.

    Parameters
    ----------
    name : str
        The name of the BPLUT parameter
    pft_array : numpy.ndarray
        Array of any size or shape with numeric elements corresponding to
        PFT codes
    bplut : dict
        (Optional) A collection of BPLUT parameters

    Returns
    -------
    numpy.ndarray
        Array of same size, shape as pft_array but with parameter values
        in place of PFT codes
    &#39;&#39;&#39;
    param = bplut[name]
    # Basically, index the &lt;name&gt; array, in PFT order, by PFT numeric codes
    return np.asarray(param)[:,np.ravel(pft_array)].reshape(pft_array.shape)</code></pre>
</details>
<div class="desc"><p>Given a BPLUT parameter and a PFT array, returns an array with the
corresponding parameter values for each PFT code.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the BPLUT parameter</dd>
<dt><strong><code>pft_array</code></strong> :&ensp;<code>numpy.ndarray</code></dt>
<dd>Array of any size or shape with numeric elements corresponding to
PFT codes</dd>
<dt><strong><code>bplut</code></strong> :&ensp;<code>dict</code></dt>
<dd>(Optional) A collection of BPLUT parameters</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>numpy.ndarray</code></dt>
<dd>Array of same size, shape as pft_array but with parameter values
in place of PFT codes</dd>
</dl></div>
</dd>
<dt id="pyl4c.data.fixtures.restore_bplut"><code class="name flex">
<span>def <span class="ident">restore_bplut</span></span>(<span>csv_file_path, version_id=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def restore_bplut(csv_file_path, version_id = None):
    &#39;&#39;&#39;
    Translates a BPLUT CSV file to a Python internal representation
    (OrderedDict instance).

    Parameters
    ----------
    csv_file_path : str
        File path to the CSV representation of the BPLUT
    version_id : str
        (Optional) Version identifier for the BPLUT

    Returns
    -------
    OrderedDict
    &#39;&#39;&#39;
    contents = []
    with open(csv_file_path, &#39;r&#39;) as stream:
        reader = csv.DictReader(
            filter(lambda row: row[0] != &#39;#&#39;, stream),
            fieldnames = BPLUT_HEADER)
        for row in reader:
            contents.append(row)

    result = BPLUT.copy()
    result[&#39;_version&#39;] = &#39;UNKNOWN&#39; if version_id is None else version_id
    result[&#39;LUE&#39;] = np.array([[
        contents[p-1][&#39;LUEmax&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;CUE&#39;] = np.array([[
        (1 - float(contents[p-1][&#39;fraut&#39;])) if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(4)
    result[&#39;tmin&#39;] = np.array([
        [contents[p-1][&#39;Tmin_min_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;Tmin_max_K&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;vpd&#39;] = np.array([
        [contents[p-1][&#39;VPD_min_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;VPD_max_Pa&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(2)
    result[&#39;smrz&#39;] = np.array([
        [contents[p-1][&#39;SMrz_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMrz_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;smsf&#39;] = np.array([
        [contents[p-1][&#39;SMtop_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;SMtop_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(1)
    result[&#39;ft&#39;] = np.array([
        [contents[p-1][&#39;FT_min&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;FT_max&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    result[&#39;tsoil&#39;] = np.array([[
        contents[p-1][&#39;Tsoil_beta0&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;f_metabolic&#39;] = np.array([[
        contents[p-1][&#39;fmet&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(3)
    result[&#39;f_structural&#39;] = np.array([[
        contents[p-1][&#39;fstr&#39;] if p in range(1, 9) else np.nan
        for p in range(0, 10)
    ]], dtype = np.float32).round(1)
    result[&#39;decay_rates&#39;] = np.array([
        [contents[p-1][&#39;kopt&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kstr&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
        [contents[p-1][&#39;kslw&#39;] if p in range(1, 9) else np.nan
            for p in range(0, 10)],
    ], dtype = np.float32).round(3)
    # The &#34;kstr&#34; and &#34;kslw&#34; values are really the fraction of kopt
    #   assigned to the second and third pools
    result[&#39;decay_rates&#39;][1,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][1,:])
    result[&#39;decay_rates&#39;][2,:] = np.multiply(
        result[&#39;decay_rates&#39;][0,:], result[&#39;decay_rates&#39;][2,:])
    return result</code></pre>
</details>
<div class="desc"><p>Translates a BPLUT CSV file to a Python internal representation
(OrderedDict instance).</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>csv_file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>File path to the CSV representation of the BPLUT</dd>
<dt><strong><code>version_id</code></strong> :&ensp;<code>str</code></dt>
<dd>(Optional) Version identifier for the BPLUT</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>OrderedDict</code></dt>
<dd>&nbsp;</dd>
</dl></div>
</dd>
<dt id="pyl4c.data.fixtures.restore_bplut_flat"><code class="name flex">
<span>def <span class="ident">restore_bplut_flat</span></span>(<span>csv_file_path, version_id=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def restore_bplut_flat(csv_file_path, version_id = None):
    &#39;&#39;&#39;
    Translates a BPLUT CSV file to a Python internal representation
    (OrderedDict instance). Compare to `restore_bplut()`, this version
    sets parameter values as flat lists instead of n-dimensional NumPy
    arrays.

    Parameters
    ----------
    csv_file_path : str
        File path to the CSV representation of the BPLUT
    version_id : str
        (Optional) Version identifier for the BPLUT

    Returns
    -------
    OrderedDict
    &#39;&#39;&#39;
    params = restore_bplut(csv_file_path, version_id)
    result = dict()
    for key, value in params.items():
        if key not in (&#39;tmin&#39;, &#39;vpd&#39;, &#39;smsf&#39;, &#39;smrz&#39;, &#39;ft&#39;):
            result[key] = value
            continue
        for i, array in enumerate(value.tolist()):
            result[f&#39;{key}{i}&#39;] = np.array(array).reshape((1,len(array)))
    return OrderedDict(result)</code></pre>
</details>
<div class="desc"><p>Translates a BPLUT CSV file to a Python internal representation
(OrderedDict instance). Compare to <code><a title="pyl4c.data.fixtures.restore_bplut" href="#pyl4c.data.fixtures.restore_bplut">restore_bplut()</a></code>, this version
sets parameter values as flat lists instead of n-dimensional NumPy
arrays.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>csv_file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>File path to the CSV representation of the BPLUT</dd>
<dt><strong><code>version_id</code></strong> :&ensp;<code>str</code></dt>
<dd>(Optional) Version identifier for the BPLUT</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>OrderedDict</code></dt>
<dd>&nbsp;</dd>
</dl></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="SMAP Mission Homepage" href="https://smap.jpl.nasa.gov/">
<img src="https://arthur-e.github.io/pyl4c/templates/images/logo_SMAP.jpg" alt="">
</a>
</header>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyl4c.data" href="index.html">pyl4c.data</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="pyl4c.data.fixtures.parameter_mapped" href="#pyl4c.data.fixtures.parameter_mapped">parameter_mapped</a></code></li>
<li><code><a title="pyl4c.data.fixtures.restore_bplut" href="#pyl4c.data.fixtures.restore_bplut">restore_bplut</a></code></li>
<li><code><a title="pyl4c.data.fixtures.restore_bplut_flat" href="#pyl4c.data.fixtures.restore_bplut_flat">restore_bplut_flat</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.5</a>.</p>
</footer>
</body>
</html>
